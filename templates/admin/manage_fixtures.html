<!-- templates/admin/manage_fixtures.html -->
{% extends 'base.html' %}

{% block content %}
<h2>Manage Fixtures</h2>

<h3>Create a New Match</h3>
<form method="POST">
    <div class="form-row">
        <div class="form-group col-md-4">
            <label for="home_team">Home Team</label>
            <select id="home_team" name="home_team" class="form-control">
                {% for team in teams %}
                    <option value="{{ team.id }}">{{ team.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group col-md-4">
            <label for="away_team">Away Team</label>
            <select id="away_team" name="away_team" class="form-control">
                {% for team in teams %}
                    <option value="{{ team.id }}">{{ team.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group col-md-4">
            <label for="date">Date & Time</label>
            <input type="datetime-local" class="form-control" id="date" name="date" required>
        </div>
    </div>
    <div class="form-group">
        <label for="round">Round</label>
        <select id="round" name="round" class="form-control">
            <option value="Group Stage">Group Stage</option>
            <option value="Quarter-Final">Quarter-Final</option>
            <option value="Semi-Final">Semi-Final</option>
            <option value="Final">Final</option>
        </select>
    </div>
    <button type="submit" class="btn btn-success">Create Match</button>
</form>

<hr>

<h3>Existing Matches</h3>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Match ID</th>
            <th>Home Team</th>
            <th>Away Team</th>
            <th>Date & Time</th>
            <th>Round</th>
            <th>Scores</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for match in matches %}
        <tr>
            <td>{{ match.id }}</td>
            <td>{{ match.home_team.name }}</td>
            <td>{{ match.away_team.name }}</td>
            <td>{{ match.date.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ match.round }}</td>
            <td>
                {% if match.score_home is not none and match.score_away is not none %}
                    {{ match.score_home }} - {{ match.score_away }}
                {% else %}
                    N/A
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('update_match', match_id=match.id) }}" class="btn btn-primary btn-sm">Update</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
